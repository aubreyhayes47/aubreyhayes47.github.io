<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
   <meta charset="UTF-8">
   <meta name="viewport" content="width=device-width, initial-scale=1.0">
   <title>From MDDS to Google: The Secret History of Big Data</title>
   
   <!-- Tailwind CSS -->
   <script src="https://cdn.tailwindcss.com"></script>
   
   <!-- Google Fonts: Inter for text, Source Code Pro for code-like elements -->
   <link rel="preconnect" href="https://fonts.googleapis.com">
   <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
   <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700;900&family=Source+Code+Pro:wght@400;600&display=swap" rel="stylesheet">
   
   <!-- D3.js for visualizations -->
   <script src="https://d3js.org/d3.v7.min.js"></script>

   <style>
       /* Custom styles to complement Tailwind */
       body {
           font-family: 'Inter', sans-serif;
           background-color: #111827; /* bg-gray-900 */
           color: #d1d5db; /* text-gray-300 */
       }
       h1, h2, h3 {
           font-weight: 900;
           letter-spacing: -0.025em;
       }
       .font-code {
           font-family: 'Source Code Pro', monospace;
       }
       /* Hero background image */
       .hero-bg {
           background-image: url('https://placehold.co/1920x1080/000000/333333?text=NSA+Data+Center+Concept');
           background-size: cover;
           background-position: center;
           position: relative;
       }
       .hero-bg::before {
           content: '';
           position: absolute;
           top: 0;
           left: 0;
           right: 0;
           bottom: 0;
           background: rgba(17, 24, 39, 0.7);
           z-index: 1;
       }
       .hero-content {
           position: relative;
           z-index: 2;
       }
       
       /* Interactive matching game styles */
       .match-item, .match-target {
           cursor: pointer;
           transition: all 0.2s ease-in-out;
       }
       .match-item.selected {
           transform: scale(1.05);
           background-color: #3b82f6; /* bg-blue-500 */
       }
       .match-target.correct {
           background-color: #22c55e; /* bg-green-500 */
           border-color: #16a34a;
       }
       .match-target.incorrect {
           background-color: #ef4444; /* bg-red-500 */
           border-color: #dc2626;
       }
   </style>
</head>
<body class="antialiased">

   <!-- MODULE 0: Welcome / Hook -->
   <section id="welcome" class="hero-bg h-screen flex items-center justify-center text-white text-center">
       <div class="hero-content max-w-4xl mx-auto px-4">
           <h1 class="text-4xl md:text-6xl lg:text-7xl font-black uppercase">
               You've Heard of Google.
               <br>
               <span class="text-blue-400">But Have You Heard of MDDS?</span>
           </h1>
           <p class="mt-6 text-lg md:text-2xl max-w-2xl mx-auto">
               What if the tech giants didn’t just emerge from garages and genius—but also from classified funding plans buried in public view?
           </p>
           <a href="#module1" class="mt-10 inline-block bg-blue-500 hover:bg-blue-600 text-white font-bold py-3 px-8 rounded-full text-lg transition duration-300 transform hover:scale-105">
               Begin →
           </a>
       </div>
   </section>

   <main class="py-20 px-4 md:px-8 bg-gray-900">
       <!-- MODULE 1: The Intelligence Community’s Big Problem -->
       <section id="module1" class="max-w-5xl mx-auto py-16">
           <h2 class="text-3xl md:text-5xl text-center text-white">The Wall Fell. The Data Flood Began.</h2>
           <p class="text-center text-lg text-gray-400 mt-4 max-w-3xl mx-auto">In the early 1990s, the end of the Cold War created an existential crisis for the Intelligence Community, compounded by a new technological threat: the "worldwide information explosion."</p>

           <!-- Interactive Timeline -->
           <div class="mt-16">
               <div class="relative w-full h-1 bg-gray-700 rounded-full">
                   <div class="absolute top-1/2 left-0 w-full h-1 -translate-y-1/2">
                       <div class="timeline-dot group" style="left: 10%;">
                           <div class="dot"></div>
                           <div class="label">1991</div>
                           <div class="tooltip">The Soviet Union collapses, removing the IC's primary adversary and forcing a pivot to "less predictable" threats.</div>
                       </div>
                       <div class="timeline-dot group" style="left: 35%;">
                           <div class="dot"></div>
                           <div class="label">1993</div>
                           <div class="tooltip">The early Internet grows, creating a "data deluge" that threatens to overwhelm existing intelligence capabilities.</div>
                       </div>
                       <div class="timeline-dot group" style="left: 60%;">
                           <div class="dot"></div>
                           <div class="label">1994</div>
                           <div class="tooltip">A NASA presentation notes the IC was ingesting 4 terabytes of data per day from classified sources alone.</div>
                       </div>
                       <div class="timeline-dot group" style="left: 85%;">
                           <div class="dot"></div>
                           <div class="label">1995</div>
                           <div class="tooltip">The MDDS program articulates a vision of managing 20 petabytes of data—an almost unimaginable scale at the time.</div>
                       </div>
                   </div>
               </div>
           </div>
           <style>
               .timeline-dot { position: absolute; top: 50%; transform: translateY(-50%); }
               .timeline-dot .dot { width: 1rem; height: 1rem; background-color: #3b82f6; border-radius: 9999px; border: 2px solid #111827; }
               .timeline-dot .label { position: absolute; bottom: 1.5rem; left: 50%; transform: translateX(-50%); color: #9ca3af; font-size: 0.875rem; }
               .timeline-dot .tooltip { position: absolute; top: 1.5rem; left: 50%; transform: translateX(-50%); width: 200px; background-color: #1f2937; color: white; padding: 0.5rem; border-radius: 0.25rem; font-size: 0.875rem; opacity: 0; visibility: hidden; transition: all 0.3s; z-index: 10; }
               .timeline-dot.group:hover .tooltip { opacity: 1; visibility: visible; }
           </style>

           <!-- Static Data Charts -->
           <div class="mt-20 grid md:grid-cols-2 gap-8 text-white">
               <div class="bg-gray-800 p-6 rounded-lg text-center">
                   <h3 class="font-bold text-xl mb-4">Cost of 1TB of Storage</h3>
                   <div class="flex justify-around items-center h-48">
                       <div class="text-center">
                           <p class="text-3xl font-black text-red-500">$2,000,000</p>
                           <p class="mt-2 text-sm text-gray-400">1993</p>
                       </div>
                       <div class="text-4xl font-thin text-gray-500">→</div>
                       <div class="text-center">
                           <p class="text-3xl font-black text-green-500">~$20</p>
                           <p class="mt-2 text-sm text-gray-400">2025</p>
                       </div>
                   </div>
               </div>
               <div class="bg-gray-800 p-6 rounded-lg text-center flex flex-col justify-center">
                   <h3 class="font-bold text-xl mb-2">The MDDS Vision</h3>
                   <p class="text-4xl font-black text-blue-400">20 Petabytes</p>
                   <p class="text-gray-400 mt-2">The goal was to manage 200MB of data on "every man, woman, and child on earth"—a breathtakingly ambitious goal in 1993.</p>
               </div>
           </div>
       </section>

       <!-- MODULE 2: The Call for Abstracts -->
       <section id="module2" class="max-w-5xl mx-auto py-16">
           <h2 class="text-3xl md:text-5xl text-center text-white">The Email That Sparked Big Data</h2>
           <div class="mt-12 grid md:grid-cols-3 gap-8 items-start">
               <div class="md:col-span-2 bg-gray-800 p-6 rounded-lg font-code text-sm leading-relaxed">
                   <p class="text-gray-400">From: Tatu Ylonen <ylo@cs.hut.fi></p>
                   <p class="text-gray-400">Date: Fri, 14 Jul 1995 12:34:56 +0300</p>
                   <p class="text-gray-400">Subject: CFP: Massive Digital Data Systems</p>
                   <br>
                   <p class="text-white">The Intelligence Community is sponsoring an unclassified workshop on Massive Digital Data Systems (MDDS)...</p>
                   <p class="mt-4 text-white">The IC is being challenged to provide timely intelligence... from massive volumes of data. Issues include: <span class="highlightable bg-blue-900/50 hover:bg-blue-700/70 rounded px-1 py-0.5 cursor-pointer">scalability to petabytes</span>, <span class="highlightable bg-blue-900/50 hover:bg-blue-700/70 rounded px-1 py-0.5 cursor-pointer">federated architectures</span>, <span class="highlightable bg-blue-900/50 hover:bg-blue-700/70 rounded px-1 py-0.5 cursor-pointer">data fusion</span>, <span class="highlightable bg-blue-900/50 hover:bg-blue-700/70 rounded px-1 py-0.5 cursor-pointer">query optimization</span>, and <span class="highlightable bg-blue-900/50 hover:bg-blue-700/70 rounded px-1 py-0.5 cursor-pointer">information retrieval</span>.</p>
                   <br>
                   <p class="text-gray-400">...</p>
                   <p class="text-yellow-300 mt-4">Crypto relevance?</p>
               </div>
               <div class="space-y-4">
                   <div class="bg-gray-800 p-4 rounded-lg">
                       <h3 class="font-bold text-white">What was CMS?</h3>
                       <p class="text-sm text-gray-400 mt-1">The Community Management Staff was the IC's "corporate headquarters," coordinating policy and budget across agencies like the CIA and NSA.</p>
                   </div>
                   <div class="bg-gray-800 p-4 rounded-lg">
                       <h3 class="font-bold text-white">What was MITRE?</h3>
                       <p class="text-sm text-gray-400 mt-1">A non-profit Federally Funded R&D Center (FFRDC) that served as the technical brain trust for the government and the IC.</p>
                   </div>
               </div>
           </div>
           
           <!-- Interactive Matching Game -->
           <div class="mt-16 bg-gray-800 p-6 rounded-lg">
               <h3 class="text-xl font-bold text-center text-white">Match the IC's 1993 Wish List to Modern Tech</h3>
               <p id="match-feedback" class="text-center text-sm text-blue-400 h-5 mt-2"></p>
               <div class="mt-4 grid md:grid-cols-2 gap-x-8 gap-y-4">
                   <!-- Wish List Items -->
                   <div id="match-items" class="space-y-3">
                       <div class="match-item bg-gray-700 p-3 rounded" data-match="1">Federated architectures</div>
                       <div class="match-item bg-gray-700 p-3 rounded" data-match="2">Information retrieval</div>
                       <div class="match-item bg-gray-700 p-3 rounded" data-match="3">Scalability to petabytes</div>
                   </div>
                   <!-- Modern Tech Targets -->
                   <div id="match-targets" class="space-y-3">
                       <div class="match-target border-2 border-dashed border-gray-600 p-3 rounded" data-match="2">Google Search</div>
                       <div class="match-target border-2 border-dashed border-gray-600 p-3 rounded" data-match="3">Bigtable / Hadoop</div>
                       <div class="match-target border-2 border-dashed border-gray-600 p-3 rounded" data-match="1">Google Cloud / Kubernetes</div>
                   </div>
               </div>
                <div class="text-center mt-4">
                   <button id="reset-match" class="bg-gray-600 hover:bg-gray-500 text-white text-sm py-1 px-3 rounded">Reset</button>
               </div>
           </div>
       </section>

       <!-- MODULE 3: The Stanford Nexus -->
       <section id="module3" class="max-w-5xl mx-auto py-16">
           <h2 class="text-3xl md:text-5xl text-center text-white">A Tale of Two Grants</h2>
           <div class="mt-12 grid md:grid-cols-2 gap-8 items-center">
               <!-- Interactive Map -->
               <div class="relative">
                   <img src="https://placehold.co/600x400/1f2937/4b5563?text=Stanford+Campus+Map" alt="Map of Stanford" class="rounded-lg w-full">
                   <div class="map-node" style="top: 30%; left: 40%;" data-title="Stanford Digital Library Project" data-text="A major public initiative funded by NSF, DARPA, and NASA to develop technologies for a universal digital library. Both Page and Brin worked under this project."></div>
                   <div class="map-node" style="top: 55%; left: 60%;" data-title="Brin's MDDS-linked Paper" data-text="A 1998 paper by Sergey Brin explicitly acknowledges support from the 'Community Management Staff’s Massive Digital Data Systems Program.'"></div>
                   <div class="map-node" style="top: 70%; left: 35%;" data-title="Jeffrey Ullman (PI)" data-text="A key Stanford professor who supervised Sergey Brin's research that was supported by the MDDS grant."></div>
               </div>
               <!-- Funding Streams -->
               <div class="space-y-6">
                   <div>
                       <h3 class="text-2xl font-bold text-green-400">Public Funding Stream</h3>
                       <p class="text-gray-400 mt-1">The <span class="font-bold">Stanford Digital Library Project</span>, funded by NSF/DARPA/NASA, provided the foundational infrastructure and institutional legitimacy.</p>
                   </div>
                   <div>
                       <h3 class="text-2xl font-bold text-blue-400">Intelligence-Linked Stream</h3>
                       <p class="text-gray-400 mt-1">The <span class="font-bold">MDDS program</span>, managed for the CIA/NSA, provided targeted "seed-funding" for Brin's research on data mining and query optimization.</p>
                   </div>
                   <div class="bg-gray-800 p-4 rounded-lg border-l-4 border-blue-500 hover-footnote-container relative">
                       <p class="text-white">Brin’s 1998 paper, "What can you do with a Web in your Pocket?", contains a critical footnote...</p>
                       <div class="footnote-popup absolute bottom-full mb-2 w-full bg-gray-700 p-3 rounded-lg opacity-0 pointer-events-none transition-opacity">
                           "Partially supported by the Community Management Staff's Massive Digital Data Systems Program"
                       </div>
                   </div>
               </div>
           </div>
           <!-- Modal for map nodes -->
           <div id="map-modal" class="fixed inset-0 bg-black/60 flex items-center justify-center p-4 z-50 hidden">
               <div class="bg-gray-800 rounded-lg max-w-md w-full p-6 relative">
                   <button id="close-modal" class="absolute top-2 right-3 text-gray-400 hover:text-white text-2xl">×</button>
                   <h3 id="modal-title" class="text-xl font-bold text-white"></h3>
                   <p id="modal-text" class="text-gray-300 mt-2"></p>
               </div>
           </div>
       </section>
       <style>
           .map-node { position: absolute; width: 1.25rem; height: 1.25rem; background-color: #3b82f6; border-radius: 9999px; border: 2px solid white; cursor: pointer; transform: translate(-50%, -50%); transition: transform 0.2s; }
           .map-node:hover { transform: translate(-50%, -50%) scale(1.5); }
           .hover-footnote-container:hover .footnote-popup { opacity: 1; }
       </style>

       <!-- MODULE 4: The Algorithm That Changed Everything -->
       <section id="module4" class="max-w-5xl mx-auto py-16">
           <h2 class="text-3xl md:text-5xl text-center text-white">PageRank: More Than a Search Tool</h2>
           <div class="mt-12 bg-gray-800 p-4 md:p-6 rounded-lg relative">
               <div id="pagerank-vis" class="w-full h-96"></div>
               <div class="absolute top-4 left-4 space-y-2">
                   <div class="flex items-center space-x-2 text-sm text-white bg-gray-900/50 p-2 rounded">
                       <span id="toggle-label-web" class="text-blue-400">Web Pages</span>
                       <label class="relative inline-flex items-center cursor-pointer">
                         <input type="checkbox" value="" id="context-toggle" class="sr-only peer">
                         <div class="w-11 h-6 bg-gray-600 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-green-600"></div>
                       </label>
                       <span id="toggle-label-people">People/Orgs</span>
                   </div>
               </div>
               <div class="absolute bottom-4 right-4 text-right">
                   <div class="group relative">
                       <div class="bg-gray-900/50 p-2 rounded-lg text-sm text-gray-300">
                          🧠 Tooltip: This isn’t just how Google finds good pages. It’s how intelligence finds influential people.
                       </div>
                   </div>
               </div>
           </div>
       </section>

       <!-- MODULE 5: The Watchers & The Watched -->
       <section id="module5" class="max-w-5xl mx-auto py-16">
           <h2 class="text-3xl md:text-5xl text-center text-white">They Came to Watch Google Grow</h2>
           <div class="mt-12 grid md:grid-cols-3 gap-8">
               <!-- Timeline -->
               <div class="md:col-span-2">
                   <div class="relative border-l-2 border-gray-700 pl-8 space-y-16">
                       <div class="timeline-event">
                           <h3 class="text-xl font-bold text-blue-400">IC Visits Stanford</h3>
                           <p class="text-gray-400 mt-1">Program manager Bhavani Thuraisingham confirms they would visit Stanford "every few months to see Brin and monitor his progress."</p>
                       </div>
                       <div class="timeline-event">
                           <h3 class="text-xl font-bold text-blue-400">Brin Demos "Google"</h3>
                           <p class="text-gray-400 mt-1">In these briefings, "Brin did present to us on the query flocks research, and also demonstrated to us versions of the Google search engine."</p>
                       </div>
                       <div class="timeline-event">
                           <h3 class="text-xl font-bold text-blue-400">September 1998</h3>
                           <p class="text-gray-400 mt-1">The final demonstration for the IC occurred in the very same month that Sergey Brin and Larry Page officially incorporated Google, Inc.</p>
                       </div>
                   </div>
               </div>
               <style>.timeline-event::before { content: ''; position: absolute; left: -0.5rem; top: 0.25rem; width: 1rem; height: 1rem; background: #3b82f6; border-radius: 9999px; }</style>
               <!-- Quiz -->
               <div class="bg-gray-800 p-6 rounded-lg flex flex-col justify-center">
                   <h3 class="font-bold text-lg text-white">What would you have thought in 1998?</h3>
                   <div id="quiz-options" class="space-y-3 mt-4">
                       <button class="quiz-option w-full text-left bg-gray-700 hover:bg-blue-500 p-3 rounded transition">Google = Research</button>
                       <button class="quiz-option w-full text-left bg-gray-700 hover:bg-blue-500 p-3 rounded transition">Google = Surveillance-ready platform</button>
                       <button class="quiz-option w-full text-left bg-gray-700 hover:bg-blue-500 p-3 rounded transition">Never thought about it</button>
                   </div>
                   <div id="quiz-result" class="mt-4 text-gray-300 hidden">
                       <p>Most observers at the time, focused on the immense technical challenges, saw it as a revolutionary research project. The surveillance implications, while noted by a few like Tatu Ylonen, were not part of the public discourse.</p>
                   </div>
               </div>
           </div>
       </section>
       
       <!-- MODULE 6: Impact and Legacy (Static Grid) -->
       <section id="module6" class="max-w-5xl mx-auto py-16">
           <h2 class="text-3xl md:text-5xl text-center text-white">From MDDS to the Utah Data Center</h2>
           <div class="mt-12 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6">
               <!-- Card 1 -->
               <div class="bg-gray-800 rounded-lg overflow-hidden flex flex-col">
                   <img src="https://placehold.co/800x600/1f2937/9ca3af?text=Petabyte+Projections" alt="Petabyte Projections" class="w-full h-40 object-cover">
                   <div class="p-4 flex flex-col flex-grow">
                       <h3 class="font-bold text-white">1993: Petabyte Projections</h3>
                       <p class="text-gray-400 text-sm mt-1 flex-grow">The MDDS program sets a goal to manage data on a scale previously unheard of.</p>
                       <p class="mt-3 text-xs font-semibold text-blue-300 bg-blue-900/50 rounded-full px-3 py-1 self-start">MDDS Goal: 20 Petabytes</p>
                   </div>
               </div>
               <!-- Card 2 -->
               <div class="bg-gray-800 rounded-lg overflow-hidden flex flex-col">
                   <img src="https://placehold.co/800x600/1f2937/60a5fa?text=Google+Expands" alt="Google Expands" class="w-full h-40 object-cover">
                   <div class="p-4 flex flex-col flex-grow">
                       <h3 class="font-bold text-white">2004: Google Expands</h3>
                       <p class="text-gray-400 text-sm mt-1 flex-grow">Just a decade later, Google's index surpasses the IC's initial dream by orders of magnitude.</p>
                       <p class="mt-3 text-xs font-semibold text-blue-300 bg-blue-900/50 rounded-full px-3 py-1 self-start">Google Index: ~100 Petabytes</p>
                   </div>
               </div>
               <!-- Card 3 -->
               <div class="bg-gray-800 rounded-lg overflow-hidden flex flex-col">
                   <img src="https://placehold.co/800x600/1f2937/f87171?text=PRISM+Leaks" alt="PRISM Leaks" class="w-full h-40 object-cover">
                   <div class="p-4 flex flex-col flex-grow">
                       <h3 class="font-bold text-white">2013: PRISM Leaks</h3>
                       <p class="text-gray-400 text-sm mt-1 flex-grow">Revelations show the deep, ongoing relationship between the IC and the tech world.</p>
                       <p class="mt-3 text-xs font-semibold text-red-300 bg-red-900/50 rounded-full px-3 py-1 self-start">Direct Access to Tech Giants</p>
                   </div>
               </div>
               <!-- Card 4 -->
               <div class="bg-gray-800 rounded-lg overflow-hidden flex flex-col">
                   <img src="https://placehold.co/800x600/000000/4b5563?text=Utah+Data+Center" alt="Utah Data Center" class="w-full h-40 object-cover">
                   <div class="p-4 flex flex-col flex-grow">
                       <h3 class="font-bold text-white">2014: Utah Data Center</h3>
                       <p class="text-gray-400 text-sm mt-1 flex-grow">The physical manifestation of the MDDS vision, built to store global data.</p>
                       <p class="mt-3 text-xs font-semibold text-gray-300 bg-gray-700/50 rounded-full px-3 py-1 self-start">Capacity: 3-12 Exabytes</p>
                   </div>
               </div>
           </div>
       </section>

       <!-- MODULE 7: Epilogue -->
       <section id="module7" class="max-w-3xl mx-auto py-16 text-center">
           <h2 class="text-3xl md:text-5xl text-white">The Most Important Question You Never Noticed</h2>
           <div class="mt-8 bg-gray-800 p-6 rounded-lg font-code text-lg leading-relaxed border-2 border-yellow-400/50 shadow-lg shadow-yellow-400/10">
               <p class="text-yellow-300 animate-pulse">Crypto relevance?</p>
           </div>
           <div class="mt-8 text-lg text-gray-300 space-y-4">
               <p>Tatu Ylonen's question in 1995 was prescient. The tools built for knowledge are indistinguishable from tools for control. MDDS wasn’t evil—it was a strategic necessity from the IC's perspective. But now, we all live inside the machine it helped design.</p>
               <p>Understanding this history is essential to navigating the complex ethical and political challenges of the age of Big Data.</p>
           </div>
           <div class="mt-12 space-x-4">
               <a href="https://github.com/aubreyhayes47/aubreyhayes47.github.io" target="_blank" class="bg-gray-700 hover:bg-gray-600 text-white font-bold py-3 px-6 rounded-full transition duration-300">View Source on GitHub</a>
               <a href="https://www.chegansrm.com/post/google-the-unrecognized-connection-to-the-intelligence-community" target="_blank" class="bg-blue-500 hover:bg-blue-600 text-white font-bold py-3 px-6 rounded-full transition duration-300">Read More Research</a>
           </div>
       </section>
   </main>

   <script>
   document.addEventListener('DOMContentLoaded', function() {
       // --- MODULE 2: Matching Game ---
       let selectedItem = null;
       const feedbackEl = document.getElementById('match-feedback');
       const items = document.querySelectorAll('.match-item');
       const targets = document.querySelectorAll('.match-target');

       items.forEach(item => {
           item.addEventListener('click', () => {
               if (item.classList.contains('matched')) return;
               items.forEach(i => i.classList.remove('selected'));
               item.classList.add('selected');
               selectedItem = item;
               feedbackEl.textContent = 'Now click a modern tech term to match.';
           });
       });

       targets.forEach(target => {
           target.addEventListener('click', () => {
               if (!selectedItem || target.classList.contains('correct')) return;

               if (selectedItem.dataset.match === target.dataset.match) {
                   target.classList.add('correct');
                   target.innerHTML = selectedItem.innerHTML;
                   selectedItem.classList.add('matched');
                   selectedItem.style.opacity = '0.3';
                   selectedItem.classList.remove('selected');
                   feedbackEl.textContent = 'Correct!';
                   selectedItem = null;
               } else {
                   target.classList.add('incorrect');
                   feedbackEl.textContent = 'Not quite. Try again.';
                   setTimeout(() => {
                       target.classList.remove('incorrect');
                       feedbackEl.textContent = 'Select an item from the left.';
                   }, 1000);
               }
           });
       });
       
       document.getElementById('reset-match').addEventListener('click', () => {
            items.forEach(item => {
               item.classList.remove('selected', 'matched');
               item.style.opacity = '1';
            });
            targets.forEach(target => {
               target.classList.remove('correct', 'incorrect');
               const originalText = {
                   '1': 'Google Cloud / Kubernetes',
                   '2': 'Google Search',
                   '3': 'Bigtable / Hadoop'
               };
               target.textContent = originalText[target.dataset.match];
            });
            selectedItem = null;
            feedbackEl.textContent = '';
       });

       // --- MODULE 3: Map Modal ---
       const modal = document.getElementById('map-modal');
       const modalTitle = document.getElementById('modal-title');
       const modalText = document.getElementById('modal-text');
       document.querySelectorAll('.map-node').forEach(node => {
           node.addEventListener('click', () => {
               modalTitle.textContent = node.dataset.title;
               modalText.textContent = node.dataset.text;
               modal.classList.remove('hidden');
           });
       });
       document.getElementById('close-modal').addEventListener('click', () => {
           modal.classList.add('hidden');
       });
       modal.addEventListener('click', (e) => {
           if (e.target === modal) {
               modal.classList.add('hidden');
           }
       });

       // --- MODULE 4: PageRank Visualization ---
       const visContainer = document.getElementById('pagerank-vis');
       const width = visContainer.clientWidth;
       const height = visContainer.clientHeight;

       const svg = d3.select("#pagerank-vis").append("svg")
           .attr("width", width)
           .attr("height", height);

       const nodes = [
           { id: 0, name: "Stanford HP", isAuthority: true, rank: 0.25 }, 
           { id: 1, name: "Research Paper A", rank: 0.15 },
           { id: 2, name: "Student Page", rank: 0.05 }, 
           { id: 3, name: "Research Paper B", rank: 0.15 },
           { id: 4, name: "Key Professor Page", isAuthority: true, rank: 0.25 }, 
           { id: 5, name: "Blog Post", rank: 0.05 },
           { id: 6, name: "Official Project Page", rank: 0.1 }, 
           { id: 7, name: "News Article", rank: 0.1 }
       ];
       const links = [
           { source: 0, target: 1 }, { source: 0, target: 3 }, { source: 0, target: 6 },
           { source: 4, target: 1 }, { source: 4, target: 3 }, { source: 4, target: 6 },
           { source: 2, target: 5 }, { source: 5, target: 1 }, { source: 7, target: 0 },
           { source: 7, target: 4 }, { source: 1, target: 3 }, { source: 6, target: 1 }
       ];

       const simulation = d3.forceSimulation(nodes)
           .force("link", d3.forceLink(links).id(d => d.id).distance(100))
           .force("charge", d3.forceManyBody().strength(-300))
           .force("center", d3.forceCenter(width / 2, height / 2));

       const link = svg.append("g").selectAll("line")
           .data(links).join("line")
           .attr("stroke", "#4b5563");

       const radiusScale = d3.scaleSqrt().domain([0, d3.max(nodes, d => d.rank)]).range([8, 25]);

       const node = svg.append("g").selectAll("circle")
           .data(nodes).join("circle")
           .attr("r", d => radiusScale(d.rank))
           .attr("fill", d => d.isAuthority ? "#3b82f6" : "#6b7280")
           .call(drag(simulation));

       const labels = svg.append("g").selectAll("text")
           .data(nodes).join("text")
           .text(d => d.name)
           .attr("x", 12)
           .attr("y", 4)
           .attr("font-size", "10px")
           .attr("fill", "#d1d5db");

       simulation.on("tick", () => {
           link.attr("x1", d => d.source.x).attr("y1", d => d.source.y)
               .attr("x2", d => d.target.x).attr("y2", d => d.target.y);
           node.attr("cx", d => d.x).attr("cy", d => d.y);
           labels.attr("transform", d => `translate(${d.x},${d.y})`);
       });
       
       document.getElementById('context-toggle').addEventListener('change', (e) => {
           const isPeople = e.target.checked;
           const webLabels = ["Stanford HP", "Research Paper A", "Student Page", "Research Paper B", "Key Professor Page", "Blog Post", "Official Project Page", "News Article"];
           const peopleLabels = ["CIA HQ", "Analyst Report A", "Contractor", "Analyst Report B", "Senior Officer", "Leaker", "Project Office", "Media Outlet"];
           
           nodes.forEach((n, i) => n.name = isPeople ? peopleLabels[i] : webLabels[i]);
           labels.text(d => d.name);
           
           document.getElementById('toggle-label-web').classList.toggle('text-blue-400', !isPeople);
           document.getElementById('toggle-label-people').classList.toggle('text-green-400', isPeople);
       });

       function drag(simulation) {
           function dragstarted(event) {
               if (!event.active) simulation.alphaTarget(0.3).restart();
               event.subject.fx = event.subject.x;
               event.subject.fy = event.subject.y;
           }
           function dragged(event) {
               event.subject.fx = event.x;
               event.subject.fy = event.y;
           }
           function dragended(event) {
               if (!event.active) simulation.alphaTarget(0);
               event.subject.fx = null;
               event.subject.fy = null;
           }
           return d3.drag().on("start", dragstarted).on("drag", dragged).on("end", dragended);
       }

       // --- MODULE 5: Quiz ---
       document.querySelectorAll('.quiz-option').forEach(button => {
           button.addEventListener('click', () => {
               document.getElementById('quiz-options').classList.add('hidden');
               document.getElementById('quiz-result').classList.remove('hidden');
           });
       });
   });
   </script>
</body>
</html>